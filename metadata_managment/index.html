



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-5.5.14">
    
    
      
        <title>Metadata managment - SciCat 4 DAPHNE</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.d3202873.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#metadata-schemas" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="SciCat 4 DAPHNE" class="md-header-nav__button md-logo" aria-label="SciCat 4 DAPHNE">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            SciCat 4 DAPHNE
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Metadata managment
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SciCat 4 DAPHNE" class="md-nav__button md-logo" aria-label="SciCat 4 DAPHNE">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    SciCat 4 DAPHNE
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../access_managment/" title="Access managment" class="md-nav__link">
      Access managment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ingestion_frontend/" title="Ingestion frontend" class="md-nav__link">
      Ingestion frontend
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Metadata managment
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Metadata managment" class="md-nav__link md-nav__link--active">
      Metadata managment
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema-specification" class="md-nav__link">
    Schema specification
  </a>
  
    <nav class="md-nav" aria-label="Schema specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-structure" class="md-nav__link">
    Schema structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-metadata-schemas" class="md-nav__link">
    Examples of Metadata schemas
  </a>
  
    <nav class="md-nav" aria-label="Examples of Metadata schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metadata-schemas-dedicated-to-a-experimental-techniques" class="md-nav__link">
    Metadata schemas dedicated to a experimental techniques
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-schemas-describing-the-dataset-structure-experimental-procedures" class="md-nav__link">
    Metadata schemas describing the dataset structure / experimental procedures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managed-schemas" class="md-nav__link">
    Managed schemas
  </a>
  
    <nav class="md-nav" aria-label="Managed schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-material-database-for-samples" class="md-nav__link">
    Example: Material database for samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../further_ideas/" title="Further ideas" class="md-nav__link">
      Further ideas
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#schema-specification" class="md-nav__link">
    Schema specification
  </a>
  
    <nav class="md-nav" aria-label="Schema specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-structure" class="md-nav__link">
    Schema structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples-of-metadata-schemas" class="md-nav__link">
    Examples of Metadata schemas
  </a>
  
    <nav class="md-nav" aria-label="Examples of Metadata schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metadata-schemas-dedicated-to-a-experimental-techniques" class="md-nav__link">
    Metadata schemas dedicated to a experimental techniques
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-schemas-describing-the-dataset-structure-experimental-procedures" class="md-nav__link">
    Metadata schemas describing the dataset structure / experimental procedures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managed-schemas" class="md-nav__link">
    Managed schemas
  </a>
  
    <nav class="md-nav" aria-label="Managed schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-material-database-for-samples" class="md-nav__link">
    Example: Material database for samples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <div class="admonition warning">
<p class="admonition-title">Project is still under active development</p>
<p>Please consider this project in it's current state just as a 
 draft. The api is not yet stable and there may still be important 
 security vulnerabilities. Documentation is still far from being complete.</p>
</div>
<h1 id="metadata-schemas">Metadata Schemas</h1>
<p>One of the unique features of SciCat is its flexibility in capturing Scientific Metadata. However, to assure a systematic (machine readable and AI-ready) structure of the metadata captured in SciCat one approach is to use well defined <em>Metadata Schemas</em>. Ideally these schemata are predefined and follow given ontologies (e.g. the PaNdata Ontology) or rules that are accepted in the community (e.g. NeXus). </p>
<p>Unfortunately for many <em>use cases</em> it is very difficult to agree on a ridged metadata structure beforehand. Here we try to follow a more flexible approach that explicitly allows the creation and modification of <em>metadata schemas</em> any time. This is rather a pragmatic decision mainly due to the fact that for many experimental datasets it is not yet clear which metadata should be captured and to some extend it just postpones the decision on the final, ridged metadata structure. In a way this approach is inspired by what was developed in <em>AMORE / AMARCORD (EuXFEL)</em>.</p>
<p>The SciCat Extention proposed here offers the following features:</p>
<ul>
<li>Metadata Schemas are stored in the mongoDB of SciCat</li>
<li>Creation and Management of Metadata Schemas through the web frontend (see ingestion frontend)</li>
<li>Metadata Schemas can be specific for "Datasets" or "Samples"</li>
<li><strong>Validation</strong> to check if of provided metadata follows the available metadata schemas</li>
<li>🔶 Support of schemas with a managed catalog of entries</li>
</ul>
<h2 id="schema-specification">Schema specification</h2>
<div class="admonition warning">
<p class="admonition-title">Data structure not stable</p>
<p>Currently the schema definition is kept close to <a href="https://docs.python-cerberus.org/en/stable/">cerberus</a> which may change in the future.</p>
</div>
<h3 id="schema-structure">Schema structure</h3>
<pre><code class="language-json">  {
    &quot;schema_name&quot;: &quot;measurement&quot;,
    &quot;schema_type&quot;: &quot;dataset&quot;
    &quot;fixed_value_entries&quot;: false,
    &quot;keys&quot;: [
      {
        &quot;key_name&quot;: &quot;measurement_type&quot;,
        &quot;type&quot;: &quot;string&quot;,
        &quot;required&quot;: true,
        &quot;unit&quot;: null
        &quot;allowed&quot;: [&quot;beamtime&quot;, &quot;lab&quot;],
        &quot;changes_likely&quot;: false,
        &quot;scan_ref&quot;: false,
      }
    ],
  }
</code></pre>
<p>The basic fields in the schema are <code>schema_name</code> and <code>schema_type</code>, where the type can either be <code>dataset</code> or <code>sample</code>. <code>fixed_value_entries</code> specifies 🔶. For each key in the schema there are the following options:</p>
<ul>
<li><code>key_name</code>: field name</li>
<li><code>type</code>:  valid values are <code>boolean</code>, <code>string</code>, <code>number</code>, <code>float</code>, <code>int</code>, <code>list</code></li>
<li><code>required</code>: specifies if a value for this field must be provided in order to pass validation </li>
<li><code>unit</code>: if there is a unit attached to this field it can be provided here</li>
<li><code>allowed</code>: can be used to specify a list of allowed values that will be</li>
<li><code>changes_likely</code>: highlights fields that are likely to change in case an exiting dataset is used as <em>template</em> for a new one. </li>
<li><code>scan_ref</code>: ... not yet used. Intended for validation in case of data references (might be removed in the future)</li>
<li><code>schema</code>: 🔶 for lists etc.</li>
</ul>
<h2 id="examples-of-metadata-schemas">Examples of Metadata schemas</h2>
<p>🔶 still some text to come...</p>
<h3 id="metadata-schemas-dedicated-to-a-experimental-techniques">Metadata schemas dedicated to a experimental techniques</h3>
<pre><code class="language-json">  {
    &quot;schema_name&quot;: &quot;GIWAXS&quot;,
    &quot;schema_type&quot;: &quot;dataset&quot;,
    &quot;fixed_value_entries&quot;: false,
    &quot;keys&quot;: [
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;sample_detector_distance&quot;,
        &quot;required&quot;: true,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;number&quot;,
        &quot;unit&quot;: &quot;mm&quot;
      },
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;central_pixel&quot;,
        &quot;required&quot;: true,
        &quot;scan_ref&quot;: false,
        &quot;schema&quot;: {
          &quot;type&quot;: &quot;number&quot;
        },
        &quot;type&quot;: &quot;list&quot;,
        &quot;unit&quot;: null
      }
    ]
  }
</code></pre>
<p><img alt="Screenshot" src="../img/giwaxs.png" /></p>
<h3 id="metadata-schemas-describing-the-dataset-structure-experimental-procedures">Metadata schemas describing the dataset structure / experimental procedures</h3>
<pre><code class="language-json">  {
    &quot;schema_name&quot;: &quot;logbook&quot;,
    &quot;schema_type&quot;: &quot;dataset&quot;,
    &quot;fixed_value_entries&quot;: false,
    &quot;keys&quot;: [
      {
        &quot;changes_likely&quot;: false,
        &quot;key_name&quot;: &quot;logbook_file&quot;,
        &quot;required&quot;: false,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;string&quot;,
        &quot;unit&quot;: null
      },
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;logbook_pages&quot;,
        &quot;required&quot;: false,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;string&quot;,
        &quot;unit&quot;: null
      }
    ]
  }
</code></pre>
<p><img alt="Screenshot" src="../img/logbook-xrr.png" /></p>
<h2 id="managed-schemas">Managed schemas</h2>
<p>🔶 still to be implemented in frontend...</p>
<p>🔶 The idea here is to have not only the schema in the DB but also a list of know entries to these schemas that can be can be used as metadata.</p>
<p>🔶 Needs more detailed explanation. </p>
<p>🔶 this is what the <code>fixed_value_entries</code> key refers to.</p>
<h3 id="example-material-database-for-samples">Example: Material database for samples</h3>
<p>One <em>use-case</em> for this could be a sort of DB which contains materials samples can be composed of. Here is an example for such a schema:</p>
<pre><code class="language-json">{
    &quot;schema_name&quot;: &quot;material&quot;,
    &quot;schema_type&quot;: &quot;sample&quot;,
    &quot;multiples_entries&quot;: true,
    &quot;fixed_value_entries&quot;: true,
    &quot;id_key&quot;: &quot;material_id&quot;,
    &quot;keys&quot;: [
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;material_id&quot;,
        &quot;required&quot;: true,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;string&quot;,
        &quot;unit&quot;: null
      },
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;full_name&quot;,
        &quot;required&quot;: false,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;string&quot;,
        &quot;unit&quot;: null
      },
      {
        &quot;changes_likely&quot;: true,
        &quot;key_name&quot;: &quot;formula&quot;,
        &quot;required&quot;: false,
        &quot;scan_ref&quot;: false,
        &quot;type&quot;: &quot;string&quot;,
        &quot;unit&quot;: null
      }
    ]
  }
</code></pre>
<p>and some entries in corresponding database collections would be:</p>
<pre><code class="language-json">{
    material_id: 'PEN',
    full_name: 'Pentacene',
    formula: 'C22H14'
},
{
    material_id: 'Au',
    full_name: 'gold'
}
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../ingestion_frontend/" title="Ingestion frontend" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Ingestion frontend
              </div>
            </div>
          </a>
        
        
          <a href="../further_ideas/" title="Further ideas" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Further ideas
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.2d1db4bd.min.js"></script>
      <script src="../assets/javascripts/bundle.6627ddf3.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>